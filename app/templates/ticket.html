<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Boleta de Venta</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      color: #222;
    }
    .wrapper {
      display: flex;
      gap: 20px;
    }
    .left {
      flex: 1;
    }
    .qr {
      width: 160px;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      font-size: 0.6rem;
    }
    .header { text-align: start; margin-bottom: 1em; }
    .meta { display: flex; justify-content: space-between; margin-bottom: 1em; font-size: 0.9rem; }
    .items { width: 100%; border-collapse: collapse; margin-bottom: 1em; }
    .items th, .items td { padding: 8px; border: 1px solid #ccc; }
    .items th { background: #f5f5f5; text-align: left; }
    .totals { margin-top: 8px; display: flex; justify-content: flex-end; font-size: 1rem; }
    .totals .label { width: 120px; text-align: right; padding-right: 8px; }
    .totals .value { width: 100px; text-align: right; }
    .footer { margin-top: 2em; font-size: 0.8rem; text-align: center; color: #555; }
    .qty { width: 60px; text-align: center; }
    .price, .subtotal { text-align: right; }
    .qr img {
      border: 1px solid #ccc;
      padding: 4px;
      background: #fff;
      width: 100%;
      height: auto;
    }
    .qr-label {
      margin-top: 6px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <div class="left">
      <div class="header">
        <h1>Boleta de Venta</h1>
        <div>{{ business.name }}</div>
        <div>RUC: {{ business.ruc }}</div>
      </div>

      <div class="meta">
        <div><strong>Boleta N°:</strong> {{ invoice.number }}</div>
        <div><strong>Fecha:</strong> {{ invoice.date }}</div>
      </div>

      <table class="items">
        <thead>
          <tr>
            <th>Descripción</th>
            <th class="qty">Cant.</th>
            <th class="price">Precio Unit.</th>
            <th class="subtotal">Subtotal</th>
          </tr>
        </thead>
        <tbody>
          {% for item in items %}
          <tr>
            <td>{{ item.description }}</td>
            <td class="qty">{{ item.quantity }}</td>
            <td class="price">S/ {{ item.unit_price }}</td>
            <td class="subtotal">S/ {{ item.subtotal }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <div class="totals">
        <div class="label"><strong>Total:</strong></div>
        <div class="value"><strong>S/ {{ total }}</strong></div>
      </div>

      <div class="footer">
        Gracias por su compra.<br />
        Atención al cliente: {{ business.support_phone }}
      </div>
    </div>

    <div class="qr">
      {% if qr_data_uri %}
        <img src="{{ qr_data_uri }}" alt="QR de la boleta" />
        <div class="qr-label">Escanea para ver detalles</div>
      {% else %}
        <div>No hay QR</div>
      {% endif %}
    </div>
  </div>
</body>
</html>